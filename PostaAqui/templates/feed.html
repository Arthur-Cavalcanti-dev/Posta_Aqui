{% extends "homepage.html" %}

{% block titulo %}
Posta Aqui - Descubra e Compartilhe
{% endblock %}

{% block body %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/feed.css') }}">

<div class="titulo-com-mascote">
  <img 
    class="mascote-principal" 
    src="{{ url_for('static', filename='imagens_site/Life_5.png') }}" 
    alt="Mascote principal"
  >
  <h1 class="main-title">Posta Aqui</h1>
</div>

{% include "nav.html" %}

<div class="feed-topo">
  <h2 class="feed-titulo">Feed</h2>
  <div class="pesquisa-container">
    <form class="pesquisa-form" method="POST" action="{{ url_for('feed') }}">
      {{ Formpesquisa.csrf_token }}
      {{ Formpesquisa.Barra_de_pesquisa(class="barra-pesquisa") }}
      <button type="submit" class="btn-pesquisa">üîç</button>
    </form>
  </div>
</div>

<div class="fotos-galeria" id="galeria-feed">
  {% for foto in fotos_paginadas.items %}
    <div class="foto-container">
      <div class="foto-acoes">
        <a href="{{ url_for('Download_de_Arquivos', filename=foto.imagem) }}">
          <button class="btn btn-download">‚¨áÔ∏è Baixar</button>
        </a>
        <a href="{{ url_for('denuncia_foto', filename=foto.imagem) }}">
          <button class="btn btn-denunciar">üö´ Denunciar</button>
        </a>
      </div>

      <a href="{{ url_for('perfil', id_usuario=foto.id_usuario) }}">
        <img 
          class="foto-imagem" 
          src="{{ url_for('static', filename='post/' + foto.imagem) }}" 
          alt="Foto do usu√°rio">
      </a>

      <h3 class="foto-nome">{{ foto.nome_foto }}</h3>
    </div>
  {% endfor %}
</div>

<div class="paginacao-container">
  {% if fotos_paginadas.pages > 1 %}
    <nav aria-label="Page navigation">
      <ul class="pagination">
          
          {# Bot√£o Anterior #}
          {% if fotos_paginadas.has_prev %}
            <li class="page-item">
              <a class="page-link" href="{{ url_for('feed', page=fotos_paginadas.prev_num) }}">‚Äπ Anterior</a>
            </li>
          {% endif %}

          {# N√∫meros das p√°ginas #}
          {% for page_num in fotos_paginadas.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
            {% if page_num %}
              {% if page_num == fotos_paginadas.page %}
                <li class="page-item active">
                  <a class="page-link" href="{{ url_for('feed', page=page_num) }}">{{ page_num }}</a>
                </li>
              {% else %}
                <li class="page-item">
                  <a class="page-link" href="{{ url_for('feed', page=page_num) }}">{{ page_num }}</a>
                </li>
              {% endif %}
            {% else %}
              <li class="page-item disabled"><span class="page-link">‚Ä¶</span></li>
            {% endif %}
          {% endfor %}

          {# Bot√£o Pr√≥xima #}
          {% if fotos_paginadas.has_next %}
            <li class="page-item">
              <a class="page-link" href="{{ url_for('feed', page=fotos_paginadas.next_num) }}">Pr√≥xima ‚Ä∫</a>
            </li>
          {% endif %}

      </ul>
    </nav>
  {% endif %}
</div>


{% include "routes_nav.html" %}
{% endblock %}
